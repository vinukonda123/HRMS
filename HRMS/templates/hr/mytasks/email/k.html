













 {%extends 'hr/base.html'%}

{%block content%}
{% include 'hr/email/sideber.html' %}
<style>
/* Style the custom select container */
.custom-select {
  position: relative;
}

/* Style the select wrapper to create a custom dropdown */
.select-wrapper {
  position: relative;
  display: inline-block;
  width: 100%;




  cursor: pointer; /* Show pointer cursor on hover */
}

/* Style the select element to make it transparent and positioned over the custom dropdown */
.custom-select select {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0; /* Make the select element transparent */
  cursor: pointer; /* Show pointer cursor on hover */
}

/* Style the custom dropdown arrow */
.select-wrapper::after {
  content: '\25BC'; /* Unicode character for a down arrow */
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  font-size: 8px;
}

/* Style the custom dropdown when it's focused or hovered */
.select-wrapper:hover,
.select-wrapper:focus {
  border-color: #007bff; /* Change border color on hover or focus */
}



</style>








  <head>

        <title>samrt hrms</title>
        <link rel="stylesheet"  href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css">

     <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


<!-- Add Bootstrap CSS link -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<!-- Add Bootstrap JS scripts (jQuery and Popper.js are required) -->

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>


        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <style>





        .nav-tabs li a {
            padding: 0.75rem 1.25rem;
        }

        .nav-tabs.vertical li {
            border: 1px solid #ddd;
            display: block;
            width: 100%
        }

.star{
  color:red;
}




#general{
  color: orange;
}

table{
  border:1px solid black;
   }









.modal-backdrop{
    --bs-backdrop-bg: #00000094;
}


    </style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    </head>



<main id="main" class="main">
    <section class="section profile">
        <div class="col-xl-12 col-lg-4">
            <div class="card" style="box-shadow: 20px 20px 60px whitesmoke, -20px -20px 60px whitesmoke; height: 800px; padding-top: 50px; padding-right: 1px; padding-bottom: 50px; padding-left: 50px;">





<div class="d-flex align-items-start">
  <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Inbox</button>
    <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Profile</button>
    <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false">Messages</button>
    <button class="nav-link" id="v-pills-settings-tab" data-bs-toggle="pill" data-bs-target="#v-pills-settings" type="button" role="tab" aria-controls="v-pills-settings" aria-selected="false">Settings</button>
  </div>
  <div class="tab-content" id="v-pills-tabContent">
    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">

                {%for i in email_details %}
        <div class="row">
            <div class="col-sm-6">
              <a href="{%url 'add' %}">   <b>{{i.sender}}</b></a>

            </div>
            <div class="col-sm-2">
            <b>{{i.subject}}</b>

            </div>

        </div>
                &nbsp; {{i.message}} {{i.timestamp|date:'Y-m-d H:i'}}
              message:
              time:  <br><hr>
                {%endfor%}
<div class="pagination">
    <span class="step-links">
        {% if email_details.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ email_details.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current-page">
            Page {{ email_details.number }} of {{ email_details.paginator.num_pages }}.
        </span>

        {% if email_details.has_next %}
            <a href="?page={{ email_details.next_page_number }}">next</a>
            <a href="?page={{email_details.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>





    </div>












    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">...</div>
    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">...</div>
    <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">...</div>
  </div>
</div>







































                <div class="col-xl-12">
                    <div class="tab-content" id="v-pills-tabContent">
                        <div class="tab-pane fade show active" id="v-pills-Assets" role="tabpanel" aria-labelledby="v-pills-Assets-tab" tabindex="0" style="padding-top: 10px; padding-right: 40px; padding-bottom: 20px; padding-left: 2px;">
                            <h3 style="color:#1E7CCF;"><b>email</b></h3>
                            <hr>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#compose">
                                Compose
                            </button>
                            <div class="modal fade modal-dialog modal-lg" style="margin-top: -15%;" id="compose" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header"></div>
                                        <div class="modal-body">
                                            <form method="post" id="send_mail_sample_form" class="form-horizontal" autocomplete="off">
                                                {% csrf_token %}
                                                <input type="hidden" name="_token" value="AbUR8GahIyj2UPK5OjVYJYkjmJC3lklimrYuSzHV">
                                                <div class="row">
                                                    <div class="col-md-12 form-group">
                                                        <div class="select-wrapper">
                                                            <label><b>Recipients List</b></label>
                                                            <select id="recipients" name="recipients" class="form-control" multiple>
                                                                <option value="" disabled selected>Recipients List</option>
                                                                {% for user in users %}
                                                                    <option value="{{ user.id }}">{{ user.email }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </div>
                                                        <span style="color:red" class="error-message" id="country_assets_upd-error"></span>
                                                    </div>
                                                    <div class="col-md-12 form-group">
                                                        <label><strong>Subject Title</strong></label>
                                                        <input type="text" name="subject_title" id="subject_title" placeholder="Subject Title" required="" class="form-control">
                                                    </div>
                                                    <div class="col-md-12">
                                                        <label><b>Message</b></label><br>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <textarea id="message" name="message" rows="4" cols="102"></textarea>
                                                    </div>
                                                    <div class="container">
                                                        <div class="form-group" align="center">
                                                            <input type="hidden" name="action" id="assets_action">
                                                            <input type="hidden" name="hidden_id" id="assets_hidden_id">
                                                            <input type="submit" name="action_button" id="assets_action_button" class="btn btn-success" value="Send">
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
            recipients                </div>
                        </div>
                        <div class="table-responsive"></div>
                    </div>
                </div>
















            </div>
        </div>
    </section>
</main>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function() {
        $("#send_mail_sample_form").submit(function(event) {
            event.preventDefault();
            var recipients = $("#recipients").val();
            var subject_title = $("#subject_title").val();
            var message = $("#message").val();
            var form36Data = new FormData();
            form36Data.append('recipients', recipients);
            form36Data.append('subject_title', subject_title);
            form36Data.append('message', message);
            var csrfToken = $("input[name='csrfmiddlewaretoken']").val();
            $.ajax({
                type: "POST",
                url: "{% url 'compose' %}",
                data: form36Data,
                processData: false,  // Prevent jQuery from processing data
                contentType: false,
                headers: {
                    "X-CSRFToken": csrfToken
                },
                success: function(response) {
                    console.log(response.message)
                    alert("eamil is send  successfully.");
                    $('#tasks').modal('hide');
                    location.reload();
                },
                error: function(xhr, status, error) {
                    console.error("Error updating item:", error);
                }
            });
        });
    });
</script>













{%endblock%}













